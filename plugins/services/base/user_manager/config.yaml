name: "user_manager"
description: "Сервис для управления состояниями пользователей (user_state) по действиям из очереди. Использует action_parser для обработки данных действий."
edition: "base"
dependencies:
  - "logger"
  - "database_service"
  - "datetime_formatter"
  - "settings_manager"
settings:
  queue_read_interval:
    type: float
    default: 0.10
    description: "Интервал (в секундах) между чтением очереди действий"
  queue_batch_size:
    type: integer
    default: 50
    description: "Максимальное количество действий, обрабатываемых за одну итерацию чтения очереди"
  state_expire:
    type: integer
    default: 600
    description: "Время жизни состояния пользователя по умолчанию (в секундах), если не указано явно в действии"
actions:
  user:
    description: "Установить состояние пользователя (user_state) в базе данных"
    required_data:
      - user_id
    config_attrs:
      user_state:
        type: string
        description: "Тип состояния пользователя (например, feedback, bug_report). Пустая строка ('') для сброса состояния."
      expire:
        type: string
        description: "Срок действия ссылки (например, '2d 3h 15m')."
features:
  - "Фоновая обработка очереди действий типа user"
  - "Установка состояния пользователя в user_states" 