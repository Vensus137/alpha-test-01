name: "action_queue_cleaner"
description: "Сервис для фоновой чистки очереди действий (actions) в базе данных. Удаляет завершённые и старые записи батчами, периодически выполняет VACUUM."
edition: "base"
singleton: true
dependencies:
  - "logger"
  - "database_service"
  - "settings_manager"
  - "datetime_formatter"

settings:
  queue_read_interval:
    type: integer
    default: 600
    description: "Интервал (в секундах) между чтением очереди действий"
  queue_batch_size:
    type: integer
    default: 1000
    description: "Максимальное количество действий, обрабатываемых за одну итерацию чтения очереди"
  older_than_hours:
    type: integer
    default: 2
    description: "Удалять записи старше этого количества часов."
  threshold_for_vacuum:
    type: integer
    default: 10000
    description: "Если за цикл чистки удалено больше этого количества записей — выполнить VACUUM."
    
features:
  - "Периодическая чистка очереди действий (actions) по статусу и времени"
  - "Удаление батчами для минимизации блокировок"
  - "VACUUM после массового удаления для освобождения места"
  - "Гибкая настройка всех параметров через config.yaml" 