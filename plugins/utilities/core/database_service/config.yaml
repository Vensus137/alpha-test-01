name: "database_service"
description: "Централизованный доступ к базе данных и связанным репозиториям."
edition: "base"
singleton: true

dependencies:
  - "logger"
  - "settings_manager"
  - "datetime_formatter"
  - "data_preparer"
  - "data_converter"
  - "action_parser"
optional_dependencies:
  - "placeholder_processor"
    
settings:
  database_url:
    type: string
    default: "sqlite:///data/core.db"
    description: "URL подключения к базе данных (поддержка SQLite, PostgreSQL и др.)"
  echo:
    type: boolean
    default: false
    description: "Включить SQL-логирование для отладки"

interface:
  methods:
    session_scope:
      description: "Контекстный менеджер для сессии и репозиториев"
      input:
        repo_names:
          type: list
          description: "Названия нужных репозиториев"
      output:
        type: tuple
        description: "(session, repos) - сессия БД и словарь репозиториев"
    create_all:
      description: "Создаёт все таблицы в БД согласно моделям"
      input: {}
      output:
        type: void
        description: "Нет возвращаемого значения"

features:
  - "Одна точка входа для работы с БД во всех слоях проекта"
  - "Легко расширяется новыми репозиториями"
  - "Контекстный менеджер для автоматического закрытия сессий"
  - "Поддержка SQLite, PostgreSQL и других БД"
  - "Автоматическое создание директории для базы данных" 