name: "requests_repository"
description: "Репозиторий для работы с таблицей Requests (запросы пользователей)."
table:
  name: "requests"
  description: "Запросы пользователей (обратная связь, сообщения об ошибках)"
  fields:
    id:
      type: "INTEGER PRIMARY KEY AUTOINCREMENT"
      description: "Первичный ключ"
    user_id:
      type: "INTEGER NOT NULL"
      description: "Telegram user_id пользователя"
    request_text:
      type: "TEXT"
      description: "Текст запроса пользователя (опционально)"
    attachments:
      type: "TEXT"
      description: "JSON с вложениями (фото, документы, видео и т.д.)"
    request_info:
      type: "TEXT"
      description: "JSON с дополнительной информацией по запросу (метаданные, контекст, теги и т.д.)"
    request_name:
      type: "TEXT"
      description: "Классификатор запроса (опционально, для аналитики и фильтрации)"
    created_at:
      type: "TEXT NOT NULL"
      description: "Время создания запроса"
    updated_at:
      type: "TEXT NOT NULL"
      description: "Время последнего обновления"
  indexes: []
interface:
  methods:
    add_request:
      description: "Добавляет новый запрос пользователя."
      input:
        fields:
          type: object
          description: "Универсальный словарь полей для создания запроса (user_id, request_text, attachments, request_info, request_name)"
      output:
        type: integer
        description: "ID созданного запроса"
    get_request_by_id:
      description: "Получает запрос по ID"
      input:
        request_id:
          type: integer
          description: "ID запроса"
      output:
        type: object
        description: "Словарь с данными запроса или None"
    get_requests_with_filters:
      description: "Получает список запросов с фильтрацией"
      input:
        from_date:
          type: datetime
          description: "Фильтр по дате создания (опционально)"
        request_name:
          type: string | array
          description: "Фильтр по типу запроса (опционально). Поддерживает как строку, так и массив строк. При передаче массива возвращаются запросы всех указанных типов."
        limit:
          type: integer
          description: "Ограничение количества запросов (опционально)"
      output:
        type: list
        description: "Список словарей с данными запросов"
features:
  - "Создание новых запросов пользователей"
  - "Получение запросов по ID"
  - "Фильтрация запросов по одному или нескольким типам"
  - "Сохранение вложений (фото, документы, видео) в JSON формате"
  - "Сохранение дополнительной информации по запросу в JSON формате"