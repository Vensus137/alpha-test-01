# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

‚ÑπÔ∏è –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ ‚Äî –ø—Ä–∏–º–µ—Ä—ã –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è –ø–æ –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
- **–ü—Ä–µ—Å–µ—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (dev, test, prod) —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `active_preset` –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º `settings.yaml`
- **triggers.yaml** ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ callback —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —á–∞—Ç–∞–º –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
- **settings.yaml** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, queue_read_interval, batch_size –∏ –¥—Ä.). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–∑–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. 

**üí° –í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö `regex` –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤—ã—à–µ –º–µ–Ω–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ—Ç –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª–µ. 

---

## üéõÔ∏è –ü—Ä–µ—Å–µ—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ä–µ–¥ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–¥–∞–∫—à–Ω).

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤:

```
config/
‚îú‚îÄ‚îÄ settings.yaml      # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (active_preset, –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
‚îú‚îÄ‚îÄ presets/
‚îÇ   ‚îú‚îÄ‚îÄ default/       # Fallback –ø—Ä–µ—Å–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–µ—Å–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.yaml    # –õ–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ triggers.yaml    # –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scenarios/       # –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ test/          # –ü—Ä–µ—Å–µ—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ settings.yaml    # –õ–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ triggers.yaml    # –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scenarios/       # –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ dev/           # –ü—Ä–µ—Å–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
‚îÇ   ‚îî‚îÄ‚îÄ prod/          # –ü—Ä–µ—Å–µ—Ç –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–æ–≤:

**–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞:**
```yaml
# –í config/settings.yaml (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
global:
  active_preset: "test"  # –£–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π –ø—Ä–µ—Å–µ—Ç
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `active_preset` –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö! –ë–µ–∑ —ç—Ç–æ–≥–æ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `default` –ø—Ä–µ—Å–µ—Ç.

**–õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:**
1. –°–∏—Å—Ç–µ–º–∞ —á–∏—Ç–∞–µ—Ç `active_preset` –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ `config/settings.yaml`
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `config/settings.yaml`
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞ –∏–∑ `config/presets/{active_preset}/settings.yaml`
4. –ú–µ—Ä–¥–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ + –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ)
5. –ï—Å–ª–∏ –ø—Ä–µ—Å–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí fallback –Ω–∞ `default` –ø—Ä–µ—Å–µ—Ç
6. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è `triggers.yaml` –∏ `scenarios/` –∏–∑ –ø–∞–ø–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ—Å–µ—Ç–æ–≤:**

- **`default`** ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è fallback
- **`test`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **`dev`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, —Ç–µ—Å—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã)
- **`prod`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—Ä–æ–¥–∞–∫—à–Ω —Ç–æ–∫–µ–Ω—ã)

### üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤:

- **–ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –º–µ–∂–¥—É —Å—Ä–µ–¥–∞–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- **–ò–∑–æ–ª—è—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫** ‚Äî –∫–∞–∂–¥—ã–π –ø—Ä–µ—Å–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ + –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- **–ú–µ—Ä–¥–∂ –Ω–∞—Å—Ç—Ä–æ–µ–∫** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ + –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–µ—Å–µ—Ç–∞
- **DRY –ø—Ä–∏–Ω—Ü–∏–ø** ‚Äî –Ω–µ –¥—É–±–ª–∏—Ä—É–µ–º –æ–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üìÅ –¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–∫:

- **`config/settings.yaml`** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (active_preset, –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- **`config/presets/{preset}/settings.yaml`** ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞ (—Ç–æ–∫–µ–Ω—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- **`config/presets/{preset}/triggers.yaml`** ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞
- **`config/presets/{preset}/scenarios/`** ‚Äî —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞

---

## ‚öôÔ∏è settings.yaml

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
global:
  file_base_path: "resources"    # –ë–∞–∑–æ–≤–∞—è –ø–∞–ø–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–≤–ª–æ–∂–µ–Ω–∏–π, –∞—É–¥–∏–æ –∏ —Ç.–¥.)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logger:
  console_enabled: true   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å
  file_enabled: false    # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–æ–º –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π
tg_event_bot:
  max_event_age_seconds: 10      # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å–æ–±—ã—Ç–∏—è (—Å–µ–∫) –¥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
permission_manager:
  roles:
    admin:
      description: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
      permissions: ["manage_users", "view_stats"]
      users: [111111111]
    user:
      description: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
      permissions: []
      users: [222222222, 333333333]

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MTProto
tg_event_mtproto:
  allowed_chats: []              # –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤ –¥–ª—è MTProto polling (–ø—É—Å—Ç–æ–π = –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥
tg_command_registry:
  commands:
    - command: "start"
      description: "–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"
      scope: default                # (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –¥–ª—è –≤—Å–µ—Ö)
    - command: "info"
      description: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
      scope: all_private_chats      # –¢–æ–ª—å–∫–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤
    - command: "groupstat"
      description: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã"
      scope: all_group_chats        # –¢–æ–ª—å–∫–æ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø
    - command: "admin"
      description: "–ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥–∞"
      scope: chat_member            # –¢–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —á–∞—Ç–µ
      chat_id: 123456789
      user_id: 987654321
  commands_clear:
    # –û—á–∏—Å—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤ (scope: chat)
    chats:
      - chat_id: 123456789  # ID —á–∞—Ç–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID)
      - chat_id: 987654321  # –î—Ä—É–≥–æ–π —á–∞—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID)
    # –û—á–∏—Å—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö (scope: chat_member)
    chat_members:
      - chat_id: 123456789
        user_id: 111222333  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á–∞—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID)
      - chat_id: 987654321
        user_id: 444555666  # –î—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –¥—Ä—É–≥–æ–º —á–∞—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
speech_processor:
  enabled: true                    # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å
  queue_read_interval: 0.1         # –ò–Ω—Ç–µ—Ä–≤–∞–ª —á—Ç–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏
  queue_batch_size: 50             # –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
  max_concurrent_tasks: 10         # –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

tg_messenger:
  enabled: true                    # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å
  interval: 0.1                    # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏
  batch_size: 50                   # –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞

validator:
  enabled: false                   # –û—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å (–Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω)
  queue_read_interval: 0.05        # –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  queue_batch_size: 100            # –ë–æ–ª—å—à–∏–π –ø–∞–∫–µ—Ç

user_manager:
  state_expire: 600                # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MTProto (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
tg_mtproto:
  device_preset: "ubuntu"          # –ü—Ä–µ—Å–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: "windows", "ubuntu", "test_preset"
  api_id: "${MTPROTO_API_ID}"     # API ID (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å)
  api_hash: "${MTPROTO_API_HASH}" # API Hash (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
tg_bot_initializer:
  token: "${TELEGRAM_BOT_TOKEN}"  # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å)
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- **`settings.yaml`** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏—Å—Ç–µ–º—ã –∏ —Å–µ—Ä–≤–∏—Å–æ–≤.
- **`global`** ‚Äî —Å–µ–∫—Ü–∏—è —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã:
  - **`file_base_path`** ‚Äî –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (—Ñ–∞–π–ª—ã, –∞—É–¥–∏–æ, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ç.–¥.)
- **`logger`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
  - **`console_enabled`** ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å
  - **`file_enabled`** ‚Äî –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
- **`tg_event_bot`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π:
  - **`max_event_age_seconds`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç —Å–æ–±—ã—Ç–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **`permission_manager`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:
  - **`roles`** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–æ–ª–µ–π —Å permissions –∏ users
- **`tg_event_mtproto`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MTProto –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
  - **`allowed_chats`** ‚Äî —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ MTProto (–ø—É—Å—Ç–æ–π = –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å)
- **`tg_command_registry`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥:
  - **`commands`** ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ Telegram Bot API
  - **`commands_clear`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—á–∏—Å—Ç–∫–∏ "–∑–∞–ª–∏–ø—à–∏—Ö" –∫–æ–º–∞–Ω–¥:
    - **`chats`** ‚Äî —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ (scope: chat)
    - **`chat_members`** ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–∞—Ö –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ (scope: chat_member)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —É—Ç–∏–ª–∏—Ç** ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ —É—Ç–∏–ª–∏—Ç:
  - **`enabled`** ‚Äî –∫–ª—é—á–µ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤:
    - `true` ‚Äî —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    - `false` ‚Äî —Å–µ—Ä–≤–∏—Å –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ config.yaml —Å–µ—Ä–≤–∏—Å–æ–≤/—É—Ç–∏–ª–∏—Ç
- **`tg_mtproto`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MTProto API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏:
  - **`device_preset`** ‚Äî –≤—ã–±–æ—Ä –ø—Ä–µ—Å–µ—Ç–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ("windows", "ubuntu", "test_preset")
  - **`api_id` –∏ `api_hash`** ‚Äî API credentials (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- **`tg_bot_initializer`** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram Bot API:
  - **`token`** ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- –û–ø–∏—Å–∞–Ω–∏–µ –∏ —Å–º—ã—Å–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö config.yaml —Å–µ—Ä–≤–∏—Å–æ–≤/—É—Ç–∏–ª–∏—Ç.
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤/—É—Ç–∏–ª–∏—Ç –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏.

### üí° –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–∞–Ω–¥–∞–º–∏:

**–ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥:**
1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ —Å–Ω–∞—á–∞–ª–∞ **–æ—á–∏—â–∞—é—Ç—Å—è –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã** –¥–ª—è –≤—Å–µ—Ö scope
2. –ó–∞—Ç–µ–º **–æ—á–∏—â–∞—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã** –∏–∑ —Å–µ–∫—Ü–∏–∏ `commands_clear`
3. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ **—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã** –∏–∑ —Å–µ–∫—Ü–∏–∏ `commands`

**–ü—Ä–æ–±–ª–µ–º–∞ "–∑–∞–ª–∏–ø—à–∏—Ö" –∫–æ–º–∞–Ω–¥:**
- Telegram –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –Ω–æ –æ—Å—Ç–∞–ª–∞—Å—å –≤ –∫—ç—à–µ –∫–ª–∏–µ–Ω—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ü–∏—é `commands_clear` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ —Ç–∞–∫–∏—Ö –∫–æ–º–∞–Ω–¥

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–æ–±–∞–≤—å—Ç–µ ID —á–∞—Ç–æ–≤/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `commands_clear` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—á–∏—Å—Ç–∫–∏
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ—á–∏—Å—Ç–∫–∏
- –£–¥–∞–ª–∏—Ç–µ –∑–∞–ø–∏—Å–∏ –∏–∑ `commands_clear` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏

### üîê –ü–æ–ª—É—á–µ–Ω–∏–µ API credentials:

#### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–µ—Å–µ—Ç–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!):**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `config/settings.yaml` (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—Ä–µ—Å–µ—Ç:
   ```yaml
   global:
     active_preset: "test"  # –∏–ª–∏ dev, prod, default
   ```
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `config/presets/{active_preset}/settings.yaml`

#### **MTProto API (–¥–ª—è tg_mtproto):**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://my.telegram.org/apps
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Telegram
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `api_id` –∏ `api_hash`
5. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```bash
   # –î–ª—è default –ø—Ä–µ—Å–µ—Ç–∞
   MTPROTO_API_ID=–≤–∞—à_api_id
   MTPROTO_API_HASH=–≤–∞—à_api_hash
   
   # –î–ª—è test –ø—Ä–µ—Å–µ—Ç–∞
   TEST_MTPROTO_API_ID=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_api_id
   TEST_MTPROTO_API_HASH=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_api_hash
   ```

#### **Telegram Bot API (–¥–ª—è tg_bot_initializer):**
1. –ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
4. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```bash
   # –î–ª—è default –ø—Ä–µ—Å–µ—Ç–∞
   TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
   
   # –î–ª—è test –ø—Ä–µ—Å–µ—Ç–∞
   TEST_TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
   ```

#### **SaluteSpeech API (–¥–ª—è speech_processor):**
1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –≤ —Å–µ—Ä–≤–∏—Å–µ SaluteSpeech
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
   ```bash
   # –î–ª—è default –ø—Ä–µ—Å–µ—Ç–∞
   SALUTESPEECH_AUTH_KEY=–≤–∞—à_api_–∫–ª—é—á
   
   # –î–ª—è test –ø—Ä–µ—Å–µ—Ç–∞
   TEST_SALUTESPEECH_AUTH_KEY=–≤–∞—à_—Ç–µ—Å—Ç–æ–≤—ã–π_api_–∫–ª—é—á
   ```

### üí° –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ API credentials –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- –§–∞–π–ª—ã —Å–µ—Å—Å–∏–π —Å–æ–¥–µ—Ä–∂–∞—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî —Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ

**–¢–µ—Å—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- –ü—Ä–µ—Å–µ—Ç `test` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `TEST_`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `default` –ø—Ä–µ—Å–µ—Ç–µ

**–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É—Ç–∏–ª–∏—Ç —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–µ—Å–µ—Ç–∞
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –≤–æ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–±—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (active_preset, file_base_path)

---

## üîó triggers.yaml

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ callback —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —á–∞—Ç–∞–º –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```yaml
text:
  exact:
    "/start": "command.start"
    "/help": "command.help"
    "/test":
      - scenario: "command.test_private"
        from_chat: ["private"]
      - scenario: "command.test_group"
        from_chat: ["group"]
      - scenario: "command.test_specific"
        from_chat: [123456789]
  state:
    "feedback": "request_test.request_feedback"
  regex:
    "^/start\\s+\\w+\\s+\\w+\\s+\\w+$": "trigger_test.regex_start_with_three_params"
    "^/start\\s+\\w+\\s+\\w+$": "trigger_test.regex_start_with_two_params"
    "^/config\\s+\\w+\\s+\\w+\\s+\\w+$": "trigger_test.regex_config_with_three_params"
  starts_with:
    "/help": "trigger_test.starts_with_help"
    "/admin": "trigger_test.starts_with_admin"
  contains:
    "–ø–æ–º–æ—â—å": "command.help"
  "*":
    - scenario: "universal_text_handler"
      from_chat: ["all"]
      continue: true
  
callback:
  exact:
    "–ù–∞–∑–∞–¥": "main_menu"
    "–ü–æ–¥—Ä–æ–±–Ω–µ–µ": "show_details"
  state:
    "awaiting_confirm": "confirm_scenario"
    "edit_mode": "edit_scenario"
  contains:
    "–µ—â—ë": "more_details"

new_member:
  default:
    - scenario: "group.welcome.welcome_default"
      from_chat: ["group"]
  group:
    "Group": "group.welcome.welcome_group_main"
  link:
    "https://t.me/+aCdOwvjT5jYyNWUy": "group.welcome.welcome_from_link"
  creator:
    "@username": "group.welcome.welcome_from_creator"
  initiator:
    "username": "group.welcome.welcome_added_by_initiator"
```

### –ü–æ—è—Å–Ω–µ–Ω–∏—è:

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤** (–ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏): `exact` ‚Üí `state` ‚Üí `regex` ‚Üí `starts_with` ‚Üí `contains` ‚Üí `"*"`
- –í–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–π `text`, `callback` –∏ `new_member` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ç–∏–ø—ã:
    - `exact` ‚Äî —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    - `state` ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —á–∞—Ç–∞
    - `regex` ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)
    - `starts_with` ‚Äî —Å—Ç—Ä–æ–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤)
    - `contains` ‚Äî —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫—É (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
    - `"*"` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

#### **1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**
–û–¥–∏–Ω —Ç—Ä–∏–≥–≥–µ—Ä –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
```yaml
"/test":
  - scenario: "command.test_private"
    from_chat: ["private"]
  - scenario: "command.test_group"
    from_chat: ["group"]
  - scenario: "command.test_specific"
    from_chat: [123456789]
```

#### **2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —á–∞—Ç–∞–º (`from_chat`)**
- `["private"]` ‚Äî —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö
- `["group"]` ‚Äî —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö
- `["all"]` ‚Äî –≤–æ –≤—Å–µ—Ö —á–∞—Ç–∞—Ö (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- `[123456789]` ‚Äî —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —á–∞—Ç–µ
- `[123456789, "private"]` ‚Äî —Å–º–µ—à–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫

#### **3. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (`"*"`)**
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞:
```yaml
"*":
  - scenario: "universal_text_handler"
    from_chat: ["all"]
    continue: true
```

#### **4. –ê—Ç—Ä–∏–±—É—Ç `continue`**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:
```yaml
- scenario: "first_handler"
  from_chat: ["all"]
  continue: true  # –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫ –¥—Ä—É–≥–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
```

#### **5. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
–°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:
```yaml
"/start": "command.start"  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: from_chat: ["private"] –¥–ª—è text/callback
default: "group.welcome.welcome_default"  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: from_chat: ["group"] –¥–ª—è new_member
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

#### **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Å–æ–æ–±—â–µ–Ω–∏—è:**
```yaml
"/test":
  - scenario: "command.test_forward"
    from_chat: ["group"]
    forward_enabled: true    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ forward —Å–æ–æ–±—â–µ–Ω–∏—è
  - scenario: "command.test_bot"
    from_chat: ["group"]
    bot_enabled: true        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤
  - scenario: "command.test_all"
    from_chat: ["group"]
    # –ë–µ–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–Ω–µ forward, –Ω–µ –æ—Ç –±–æ—Ç–æ–≤)
```

#### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```yaml
"/test":
  - scenario: "first_handler"
    from_chat: ["all"]
    continue: true           # –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∏—Å–∫ –¥—Ä—É–≥–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
  - scenario: "second_handler"
    from_chat: ["all"]
    # –ë–µ–∑ continue - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞
```

### –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤:** `"all"` > `"group"/"private"` > –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ `chat_id`
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
  - `text` –∏ `callback` —Ç—Ä–∏–≥–≥–µ—Ä—ã: `from_chat: ["private"]`
  - `new_member` —Ç—Ä–∏–≥–≥–µ—Ä—ã: `from_chat: ["group"]`
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:**
  - **Forward —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ `forward_enabled: true`
  - **–°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–æ–≤** ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ `bot_enabled: true`
- **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏:** –í–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥—ë—Ç –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª–µ
- **Regex —Ç—Ä–∏–≥–≥–µ—Ä—ã:** –†–∞–∑–º–µ—â–∞–π—Ç–µ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤—ã—à–µ –º–µ–Ω–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:** –ò–º–µ—é—Ç —Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥—Ä—É–≥–∏–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è