# –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å STT (Speech-to-Text)

STT (Speech-to-Text) ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—á–∏ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ –∏–∑ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ SaluteSpeech API. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã –≤ —Ç–µ–∫—Å—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –∏ —Ä–µ–∂–∏–º–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –î–µ–π—Å—Ç–≤–∏–µ `from_speech`

–°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —Ç–∏–ø–∞ `from_speech` –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –ë–î. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **`audio_file`** ‚Äî –ø—É—Ç—å –∫ –∞—É–¥–∏–æ—Ñ–∞–π–ª—É (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- **`audio_file_id`** ‚Äî file_id –∏–∑ Telegram (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- **`language`** ‚Äî —è–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "ru-RU")
- **`voice`** ‚Äî –≥–æ–ª–æ—Å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∞—É–¥–∏–æ

1. **–Ø–≤–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª** ‚Äî `audio_file: "path/to/file.mp3"`
2. **File ID –∏–∑ Telegram** ‚Äî `audio_file_id: "CQACAgIAAxkBAAIB..."`  
3. **–í–ª–æ–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –∞—É–¥–∏–æ –≤ Telegram –≤–ª–æ–∂–µ–Ω–∏—è—Ö

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- **–ê—É–¥–∏–æ —Ñ–∞–π–ª—ã**: `.mp3`, `.ogg`, `.wav`, `.m4a`
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: `.ogg` (Telegram voice messages)
- **–†–∞–∑–º–µ—Ä**: –¥–æ 100 –ú–ë –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API

## –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏

```yaml
simple_stt:
  actions:
    - type: send
      text: "üé§ –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏"
      callback_edit: false
    - type: from_speech
      audio_file: "speech/examples/–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞.mp3"
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –í—Ç–æ—Ä–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ä–µ—á—å –∏–∑ —Ñ–∞–π–ª–∞
3. –¢—Ä–µ—Ç—å–µ –∏ —á–µ—Ç–≤–µ—Ä—Ç–æ–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –ü—Ä–∏–º–µ—Ä 2: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑ Telegram –≤–ª–æ–∂–µ–Ω–∏–π

```yaml
stt_from_attachments:
  actions:
    - type: send
      text: "üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –∏–∑ –≤–ª–æ–∂–µ–Ω–∏—è"
      callback_edit: false
    - type: from_speech
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª –≤ –≤–ª–æ–∂–µ–Ω–∏—è—Ö —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## –ü—Ä–∏–º–µ—Ä 3: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º file_id

```yaml
stt_with_file_id:
  actions:
    - type: send
      text: "üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –ø–æ file_id"
      callback_edit: false
    - type: from_speech
      audio_file_id: "{telegram_file_id}"
      language: "ru-RU"
      placeholder: true
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{telegram_file_id}` ‚Äî file_id –∏–∑ Telegram (–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –≤–ª–æ–∂–µ–Ω–∏–π)
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## –ü—Ä–∏–º–µ—Ä 4: –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ

```yaml
multilingual_stt:
  actions:
    - type: send
      text: "üåç –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏"
      callback_edit: false
    - type: from_speech
      audio_file: "speech/examples/Kira.mp3"
      language: "en-US"
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `language: "en-US"` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏: `ru-RU`, `en-US`, `en-GB`, `de-DE`, `fr-FR`, `es-ES`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ API (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π/–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)

## –ü—Ä–∏–º–µ—Ä 5: –í–∞–ª–∏–¥–∞—Ü–∏—è –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞

```yaml
stt_with_validation:
  actions:
    - type: send
      text: "üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π"
      callback_edit: false
    - type: validator
      rules:
        attachments:
          - rule: not_empty
        audio_file:
          - rule: not_empty
      placeholder: true
      chain: true
    - type: send
      text: "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª"
      placeholder: true
      chain: failed
      chain_drop: completed
    - type: from_speech
      audio_file: "{audio_file}"
      language: "ru-RU"
      placeholder: true
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
2. –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
3. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –ü—Ä–∏–º–µ—Ä 6: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```yaml
handle_uploaded_audio:
  actions:
    - type: user
      user_state: "waiting_audio_upload"
      chain: true
    - type: send
      text: |
        üì§ <b>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è</b>
        
        üìã –°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
        üéµ –î–µ–π—Å—Ç–≤–∏–µ: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ª—é–±–æ–π –∞—É–¥–∏–æ—Ñ–∞–π–ª (.mp3, .ogg, .wav)
        
        –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω —á–µ—Ä–µ–∑ STT
      inline:
        - [{"üîô –ù–∞–∑–∞–¥": "main_menu"}]
      callback_edit: false
      chain: completed

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
process_uploaded_audio:
  actions:
    - type: validator
      rules:
        attachments:
          - rule: not_empty
      chain: true
    - type: send
      text: "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª"
      message_reply: true
      chain: failed
      chain_drop: completed
    - type: send
      text: "üéµ –§–∞–π–ª –ø–æ–ª—É—á–µ–Ω! –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ STT..."
      callback_edit: false
      chain: true
    - type: from_speech
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `waiting_audio_upload`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª
3. –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
4. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
5. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –ü—Ä–∏–º–µ—Ä 7: –ö–æ–º–∞–Ω–¥–∞ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞

```yaml
stt_command:
  actions:
    - type: send
      text: "üé§ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏..."
      callback_edit: false
    - type: from_speech
      audio_file: "{event_text|regex:(?<=/stt\\s).+}"
      placeholder: true
      language: "ru-RU"
      chain: true
    - type: send
      text: |
        üìù –§–∞–π–ª –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è: <code>{audio_file}</code>
        –ò—Å—Ö–æ–¥–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: <code>{event_text}</code>
      placeholder: true
      callback_edit: false
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–∏–¥–∞ `/stt path/to/file.mp3`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ø–æ—Å–ª–µ `/stt` —á–µ—Ä–µ–∑ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –ø—É—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –ü—Ä–∏–º–µ—Ä 8: –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞

```yaml
language_selection_menu:
  actions:
    - type: send
      text: "üåç –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏:"
      inline:
        - [{"üá∑üá∫ –†—É—Å—Å–∫–∏–π": "stt_russian"}, {"üá∫üá∏ English": "stt_english"}]
        - [{"üá©üá™ Deutsch": "stt_german"}, {"üá´üá∑ Fran√ßais": "stt_french"}]
      callback_edit: false

# –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤
stt_russian:
  actions:
    - type: send
      text: "üá∑üá∫ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ..."
      callback_edit: false
    - type: from_speech
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed

stt_english:
  actions:
    - type: send
      text: "üá∫üá∏ Speech recognition in English..."
      callback_edit: false
    - type: from_speech
      language: "en-US"
      chain: true
    - type: send
      text: "‚úÖ Recognition completed!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù Result: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

## –ü—Ä–∏–º–µ—Ä 9: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```yaml
stt_with_error_handling:
  actions:
    - type: send
      text: "üé§ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"
      callback_edit: false
    - type: from_speech
      audio_file: "{user_audio_file|fallback:speech/examples/default.mp3}"
      placeholder: true
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
    - type: send
      text: "‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏: {error}"
      placeholder: true
      callback_edit: false
      chain: failed
    - type: send
      text: "üîÑ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"
      placeholder: true
      callback_edit: false
      chain: ["completed", "failed"]
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{user_audio_file|fallback:speech/examples/default.mp3}` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∞–π–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## –ü—Ä–∏–º–µ—Ä 10: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

```yaml
test_stt_methods:
  actions:
    - type: send
      text: |
        üìã <b>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</b>
        
        üîÑ <b>–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥</b> - –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
        ‚è≥ <b>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥</b> - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤  
        üéØ <b>–û–±—â–∏–π —Ç–µ—Å—Ç</b> - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ –æ–∂–∏–¥–∞–Ω–∏–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞
        
        <i>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∏–∂–µ:</i>
      inline:
        - [{"üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π STT": "sync_stt_test"}, {"‚è≥ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π STT": "async_stt_test"}]
        - [{"üéØ –û–±—â–∏–π —Ç–µ—Å—Ç": "general_stt_test"}]
        - [{"üîô –ú–µ–Ω—é": "start_menu"}]
      callback_edit: false

# –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç STT
sync_stt_test:
  actions:
    - type: send
      text: "üîÑ –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ STT"
      callback_edit: false
    - type: send
      text: |
        üìÅ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª: <code>speech/examples/–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞.mp3</code>
        ‚öôÔ∏è –ú–µ—Ç–æ–¥: –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API SaluteSpeech
        
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º...
      attachment: 
        - "speech/examples/–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞.mp3"
      callback_edit: false
      chain: true
    - type: from_speech
      audio_file: "speech/examples/–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞.mp3"
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç STT
async_stt_test:
  actions:
    - type: send
      text: "‚è≥ –¢–µ—Å—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ STT"
      callback_edit: false
    - type: send
      text: |
        üìÅ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª: <code>speech/examples/–ë–æ—Ä–∏—Å.mp3</code>
        ‚öôÔ∏è –ú–µ—Ç–æ–¥: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API SaluteSpeech
        
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º...
      attachment: 
        - "speech/examples/–ë–æ—Ä–∏—Å.mp3"
      callback_edit: false
      chain: true
    - type: from_speech
      audio_file: "speech/examples/–ë–æ—Ä–∏—Å.mp3"
      language: "ru-RU"
      chain: true
    - type: send
      text: "‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

## "–•–∏—Ç—Ä—ã–µ" –ø—Ä–∏–µ–º—ã —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```yaml
# –ò–∑ –≤–ª–æ–∂–µ–Ω–∏–π —Å–æ–æ–±—â–µ–Ω–∏—è
audio_file: "{attachments|first|file}"

# –ò–∑ –∫–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
audio_file: "{event_text|regex:(?<=/stt\\s).+}"

# –ò–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
audio_file: "{prev_audio_file}"

# –° fallback –∑–Ω–∞—á–µ–Ω–∏–µ–º
audio_file: "{user_audio|fallback:speech/examples/default.mp3}"
```

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —è–∑—ã–∫–∞

```yaml
# –ü–æ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
language: "{user_role|equals:admin|value:en-US|fallback:ru-RU}"

# –ü–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞
language: "{audio_file|ends_with:.en.mp3|value:en-US|fallback:ru-RU}"

# –ò–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
language: "{user_preferred_language|fallback:ru-RU}"
```

### 3. –£—Å–ª–æ–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```yaml
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
validator:
  rules:
    audio_file_size:
      - rule: less_than
        value: 10485760  # 10MB
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º
- **–î–æ–±–∞–≤–ª—è—Ç—å fallback –∑–Ω–∞—á–µ–Ω–∏—è** –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è —á–∞—Å—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —è–∑—ã–∫** –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å–ª–æ–∂–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã

### ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã** (>100 –ú–ë) ‚Äî –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã** ‚Äî –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º API
- **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è** ‚Äî —É—Å–ª–æ–∂–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** ‚Äî —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —è–∑—ã–∫** ‚Äî –º–æ–∂–µ—Ç —É—Ö—É–¥—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- **–°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äî –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

## –û—Ç–ª–∞–¥–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Ç–ª–∞–¥–∫–µ
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á** SaluteSpeech –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞** –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** —Å–µ—Ä–≤–∏—Å–∞ speech_processor
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```yaml
# –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
test_stt_params:
  actions:
    - type: send
      text: |
        üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:
        ‚Ä¢ –§–∞–π–ª: {audio_file|fallback:–ù–µ —É–∫–∞–∑–∞–Ω}
        ‚Ä¢ –Ø–∑—ã–∫: {language|fallback:ru-RU}
        ‚Ä¢ File ID: {audio_file_id|fallback:–ù–µ —É–∫–∞–∑–∞–Ω}
      callback_edit: false
    - type: from_speech
      audio_file: "{audio_file|fallback:speech/examples/test.mp3}"
      language: "{language|fallback:ru-RU}"
      placeholder: true
      chain: true
    - type: send
      text: "‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω"
      callback_edit: false
      chain: true
    - type: send
      text: "üìù –†–µ–∑—É–ª—å—Ç–∞—Ç: {speech_to_text}"
      placeholder: true
      callback_edit: false
      chain: completed
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

STT (Speech-to-Text) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ –∏ –Ω–∞–¥–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∞—É–¥–∏–æ** –∑–∞—Ä–∞–Ω–µ–µ
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è** –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
