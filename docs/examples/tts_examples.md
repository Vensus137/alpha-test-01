# –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å TTS (Text-to-Speech)

TTS (Text-to-Speech) ‚Äî —ç—Ç–æ —á–∞—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—á–∏ –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ SaluteSpeech API. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≥–æ–ª–æ—Å–∞–º–∏, —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –î–µ–π—Å—Ç–≤–∏–µ `to_speech`

–°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —Ç–∏–ø–∞ `to_speech` –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –ë–î. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **`text_to_speech`** ‚Äî —Ç–µ–∫—Å—Ç –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- **`voice`** ‚Äî –≥–æ–ª–æ—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "baya")
- **`speed`** ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1.0)
- **`format`** ‚Äî —Ñ–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "opus")
- **`quality`** ‚Äî –∫–∞—á–µ—Å—Ç–≤–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "high")
- **`ssml`** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSML (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ–ª–æ—Å–∞

- **üë® –ë–æ—Ä–∏—Å** ‚Äî `Bys_24000`
- **üë© –ù–∞—Ç–∞–ª—å—è** ‚Äî `Nec_24000`
- **üë® –¢–∞—Ä–∞—Å** ‚Äî `Tur_24000`
- **üë© –ú–∞—Ä—Ñ–∞** ‚Äî `May_24000`
- **üë® –°–µ—Ä–≥–µ–π** ‚Äî `Pon_24000`
- **üá∫üá∏ Kira** ‚Äî `Kin_24000` (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

## –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏

```yaml
simple_speech:
  actions:
    - type: send
      text: "üé§ –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏"
      callback_edit: false
    - type: to_speech
      text_to_speech: "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏."
      voice: "Bys_24000"
      speed: 1.0
      format: "opus"
      quality: "high"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª –≥–æ—Ç–æ–≤!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –í—Ç–æ—Ä–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å–æ–∑–¥–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª
3. –¢—Ä–µ—Ç—å–µ –¥–µ–π—Å—Ç–≤–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª

## –ü—Ä–∏–º–µ—Ä 2: –°–∏–Ω—Ç–µ–∑ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è

```yaml
speech_from_message:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
      callback_edit: false
    - type: to_speech
      text_to_speech: "{reply_message_text}"
      placeholder: true
      voice: "Nec_24000"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏–∑ –≤–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{reply_message_text}` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ –æ—Ç–≤–µ—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- `placeholder: true` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
- –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ä–µ—á—å –∏–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ü—Ä–∏–º–µ—Ä 3: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

```yaml
speech_with_regex:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞"
      callback_edit: false
    - type: to_speech
      text_to_speech: "{event_text|regex:(?<=/speech\\s).+}"
      placeholder: true
      voice: "Tur_24000"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏–∑ –∫–æ–º–∞–Ω–¥—ã"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{event_text|regex:(?<=/speech\\s).+}` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã `/speech`
- –ù–∞–ø—Ä–∏–º–µ—Ä: `/speech –ü—Ä–∏–≤–µ—Ç –º–∏—Ä` ‚Üí —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç—Å—è "–ü—Ä–∏–≤–µ—Ç –º–∏—Ä"
- –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `(?<=/speech\\s).+` –æ–∑–Ω–∞—á–∞–µ—Ç "–≤—Å–µ —Å–∏–º–≤–æ–ª—ã –ø–æ—Å–ª–µ '/speech '"

## –ü—Ä–∏–º–µ—Ä 4: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ —Å–∏–Ω—Ç–µ–∑–æ–º

```yaml
speech_with_validation:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π"
      callback_edit: false
    - type: validator
      rules:
        text_to_speech:
          - rule: not_empty
          - rule: length_min
            value: 1
      placeholder: true
      chain: true
    - type: send
      text: "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞"
      placeholder: true
      chain: failed
      chain_drop: completed
    - type: to_speech
      text_to_speech: "{text_to_speech}"
      placeholder: true
      voice: "May_24000"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª –≥–æ—Ç–æ–≤!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞
2. –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
3. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏
4. –ì–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –ü—Ä–∏–º–µ—Ä 5: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞

```yaml
dynamic_voice_selection:
  actions:
    - type: send
      text: "üé§ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞"
      callback_edit: false
    - type: to_speech
      text_to_speech: "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –≥–æ–ª–æ—Å–∞."
      voice: "{selected_voice|fallback:Bys_24000}"
      placeholder: true
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –≥–æ–ª–æ—Å–æ–º: {selected_voice|fallback:–ë–æ—Ä–∏—Å}"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{selected_voice|fallback:Bys_24000}` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≥–æ–ª–æ—Å –∏–ª–∏ –ë–æ—Ä–∏—Å–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ì–æ–ª–æ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω —á–µ—Ä–µ–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥

## –ü—Ä–∏–º–µ—Ä 6: –°–∏–Ω—Ç–µ–∑ —Å SSML

```yaml
speech_with_ssml:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —Å SSML"
      callback_edit: false
    - type: to_speech
      text_to_speech: |
        <speak>
          –ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ <prosody rate="slow">–º–µ–¥–ª–µ–Ω–Ω–∞—è</prosody> —Ä–µ—á—å.
          –ê —ç—Ç–æ <prosody rate="fast">–±—ã—Å—Ç—Ä–∞—è</prosody> —Ä–µ—á—å.
          <break time="1s"/>
          –ò –ø–∞—É–∑–∞ –≤ —Å–µ–∫—É–Ω–¥—É.
        </speak>
      voice: "Pon_24000"
      ssml: true
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª —Å SSML –≥–æ—Ç–æ–≤!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `ssml: true` ‚Äî –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É SSML —Ä–∞–∑–º–µ—Ç–∫–∏
- SSML –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ç–æ–Ω–∞—Ü–∏–µ–π, —Å–∫–æ—Ä–æ—Å—Ç—å—é, –ø–∞—É–∑–∞–º–∏
- `<prosody rate="slow">` ‚Äî –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–µ—á—å
- `<break time="1s"/>` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–∞—É–∑—É

## –ü—Ä–∏–º–µ—Ä 7: –ö–æ–º–∞–Ω–¥–∞ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞

```yaml
speech_command:
  actions:
    - type: send
      text: "üé§ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—É —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏..."
      callback_edit: false
    - type: to_speech
      text_to_speech: "{event_text|regex:(?<=/speech\\s).+}"
      placeholder: true
      voice: "Kin_24000"
      chain: true
    - type: send
      text: |
        üìù –¢–µ–∫—Å—Ç –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞: <code>{text_to_speech}</code>
        –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: <code>{event_text}</code>
      placeholder: true
      callback_edit: false
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª –≥–æ—Ç–æ–≤!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–∏–¥–∞ `/speech –¢–µ–∫—Å—Ç –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ `/speech` —á–µ—Ä–µ–∑ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –°–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç —Ä–µ—á—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª

## –ü—Ä–∏–º–µ—Ä 8: –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –≥–æ–ª–æ—Å–∞

```yaml
voice_selection_menu:
  actions:
    - type: send
      text: "üé§ –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–ª–æ—Å –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏:"
      inline:
        - [{"üë® –ë–æ—Ä–∏—Å": "speech_boris"}, {"üë© –ù–∞—Ç–∞–ª—å—è": "speech_natalia"}]
        - [{"üë® –¢–∞—Ä–∞—Å": "speech_taras"}, {"üë© –ú–∞—Ä—Ñ–∞": "speech_marfa"}]
        - [{"üë® –°–µ—Ä–≥–µ–π": "speech_sergey"}, {"üá∫üá∏ Kira": "speech_kira"}]
      callback_edit: false

# –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤
speech_boris:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –≥–æ–ª–æ—Å–æ–º –ë–æ—Ä–∏—Å–∞..."
      callback_edit: false
    - type: to_speech
      text_to_speech: "–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ë–æ—Ä–∏—Å. –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏."
      voice: "Bys_24000"
      speed: 1.0
      format: "opus"
      quality: "high"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª –≥–æ—Ç–æ–≤!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed

speech_natalia:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –≥–æ–ª–æ—Å–æ–º –ù–∞—Ç–∞–ª—å–∏..."
      callback_edit: false
    - type: to_speech
      text_to_speech: "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ù–∞—Ç–∞–ª—å—è. –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏."
      voice: "Nec_24000"
      speed: 1.0
      format: "opus"
      quality: "high"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª –≥–æ—Ç–æ–≤!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

## –ü—Ä–∏–º–µ—Ä 9: –°–∏–Ω—Ç–µ–∑ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

```yaml
speech_with_error_handling:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫"
      callback_edit: false
    - type: to_speech
      text_to_speech: "{user_text|fallback:–¢–µ–∫—Å—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é}"
      placeholder: true
      voice: "Bys_24000"
      chain: true
    - type: send
      text: "‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
    - type: send
      text: "‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏: {error}"
      placeholder: true
      callback_edit: false
      chain: failed
    - type: send
      text: "üîÑ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"
      placeholder: true
      callback_edit: false
      chain: ["completed", "failed"]
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{user_text|fallback:–¢–µ–∫—Å—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é}` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Ç–µ–∫—Å—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞—É–¥–∏–æ—Ñ–∞–π–ª
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## –ü—Ä–∏–º–µ—Ä 10: –°–∏–Ω—Ç–µ–∑ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```yaml
speech_custom_params:
  actions:
    - type: send
      text: "üé§ –°–∏–Ω—Ç–µ–∑ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏"
      callback_edit: false
    - type: to_speech
      text_to_speech: "{custom_text}"
      voice: "{custom_voice|fallback:Bys_24000}"
      speed: "{custom_speed|fallback:1.0}"
      format: "{custom_format|fallback:opus}"
      quality: "{custom_quality|fallback:high}"
      placeholder: true
      chain: true
    - type: send
      text: |
        ‚úÖ –ê—É–¥–∏–æ—Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
        ‚Ä¢ –ì–æ–ª–æ—Å: {custom_voice|fallback:–ë–æ—Ä–∏—Å}
        ‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å: {custom_speed|fallback:1.0}
        ‚Ä¢ –§–æ—Ä–º–∞—Ç: {custom_format|fallback:opus}
        ‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ: {custom_quality|fallback:high}
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

## "–•–∏—Ç—Ä—ã–µ" –ø—Ä–∏–µ–º—ã —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```yaml
# –ò–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
text_to_speech: "{reply_message_text}"

# –ò–∑ –∫–æ–º–∞–Ω–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
text_to_speech: "{event_text|regex:(?<=/speech\\s).+}"

# –ò–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
text_to_speech: "{prev_text}"

# –° fallback –∑–Ω–∞—á–µ–Ω–∏–µ–º
text_to_speech: "{user_input|fallback:–¢–µ–∫—Å—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é}"
```

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞

```yaml
# –ü–æ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
voice: "{user_role|equals:admin|value:Kin_24000|fallback:Bys_24000}"

# –ü–æ —è–∑—ã–∫—É —Ç–µ–∫—Å—Ç–∞
voice: "{text_language|equals:en|value:Kin_24000|fallback:Nec_24000}"

# –ò–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
voice: "{user_preferred_voice|fallback:Bys_24000}"
```

### 3. –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

```yaml
# –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
speed: "{text_length|>100|value:0.8|fallback:1.0}"

# –ë—ã—Å—Ç—Ä–µ–µ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
speed: "{text_length|<50|value:1.2|fallback:1.0}"
```

### 4. –£—Å–ª–æ–≤–Ω—ã–π SSML

```yaml
# –í–∫–ª—é—á–∞–µ–º SSML —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤
ssml: "{voice|in_list:Kin_24000,Pon_24000|value:true|fallback:false}"

# SSML –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
ssml: "{text_length|>200|value:true|fallback:false}"
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ —Å–∏–Ω—Ç–µ–∑–æ–º
- **–î–æ–±–∞–≤–ª—è—Ç—å fallback –∑–Ω–∞—á–µ–Ω–∏—è** –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏** —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ—Ä–∞–∑
- **–ü—Ä–∏–º–µ–Ω—è—Ç—å SSML** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–æ–Ω–∞—Ü–∏–π
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å–ª–æ–∂–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã

### ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç** (>1000 —Å–∏–º–≤–æ–ª–æ–≤) ‚Äî –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ–ª–æ—Å–∞** ‚Äî –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º API
- **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ç–µ–∑–∞** ‚Äî —É—Å–ª–æ–∂–Ω—è–µ—Ç –æ—Ç–ª–∞–¥–∫—É
- **–°–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é** ‚Äî —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä—É—é/–º–µ–¥–ª–µ–Ω–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å** (<0.5 –∏–ª–∏ >2.0) ‚Äî –º–æ–∂–µ—Ç —É—Ö—É–¥—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ
- **–°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äî –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É

## –û—Ç–ª–∞–¥–∫–∞ —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Ç–ª–∞–¥–∫–µ
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á** SaluteSpeech –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Ç–µ–∫—Å—Ç–∞** –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** —Å–µ—Ä–≤–∏—Å–∞ speech_processor
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
```yaml
# –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
test_speech_params:
  actions:
    - type: send
      text: |
        üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ç–µ–∑–∞:
        ‚Ä¢ –¢–µ–∫—Å—Ç: {text_to_speech|fallback:–ù–µ —É–∫–∞–∑–∞–Ω}
        ‚Ä¢ –ì–æ–ª–æ—Å: {voice|fallback:–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é}
        ‚Ä¢ –°–∫–æ—Ä–æ—Å—Ç—å: {speed|fallback:1.0}
      callback_edit: false
    - type: to_speech
      text_to_speech: "{text_to_speech|fallback:–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç}"
      voice: "{voice|fallback:Bys_24000}"
      speed: "{speed|fallback:1.0}"
      placeholder: true
      chain: true
    - type: send
      text: "‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω"
      attachment: "{file_path}"
      placeholder: true
      callback_edit: false
      chain: completed
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Speech Processor –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ –∏ –Ω–∞–¥–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞** –∑–∞—Ä–∞–Ω–µ–µ
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–º–µ–Ω—è–π—Ç–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è** –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** —Å–∏–Ω—Ç–µ–∑–∞
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–µ—á–∏ 