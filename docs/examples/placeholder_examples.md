# –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º

–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä ‚Äî —ç—Ç–æ –º–æ—â–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ —à–∞–±–ª–æ–Ω—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤, –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

- **–ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞**: `{field_name}`
- **–° –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º**: `{field_name|modifier:param}`
- **–¶–µ–ø–æ—á–∫–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤**: `{field_name|modifier1:param1|modifier2:param2}`
- **Fallback –∑–Ω–∞—á–µ–Ω–∏–µ**: `{field_name|fallback:default_value}`
- **–í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã**: `{field_name|modifier:{nested_field}}` –∏–ª–∏ `{field_name|modifier:value_{nested_field}}`

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

- **`prev_data`** ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ü–µ–ø–æ—á–∫–µ
- **`response_data`** ‚Äî –¥–∞–Ω–Ω—ã–µ, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **`parsed_action`** ‚Äî –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- **–õ—é–±—ã–µ –ø–æ–ª—è** –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –í–∫–ª—é—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã **–ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤:**
- –î–æ–±–∞–≤—å—Ç–µ `placeholder: true` –∫ –¥–µ–π—Å—Ç–≤–∏—é
- –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –≤–æ –≤—Å–µ—Ö –ø–æ–ª—è—Ö –¥–µ–π—Å—Ç–≤–∏—è

**–ò—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Äî —Å–µ—Ä–≤–∏—Å Messenger:**
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–∞** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –≠—Ç–æ —Å–∞–º—ã–π —á–∞—Å—Ç—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ‚Äî –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ–∫

## –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```yaml
simple_substitution:
  actions:
    - type: send
      text: "–ü—Ä–∏–≤–µ—Ç, {username}! –í–∞—à ID: {user_id}"
      callback_edit: false
    - type: send
      text: "–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: {current_time|format:datetime}"
      callback_edit: false
      chain: true
    - type: send
      text: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π: {message_count|+1}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `{username}` ‚Äî –ø—Ä–æ—Å—Ç–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{user_id}` ‚Äî –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{current_time|format:datetime}` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
- `{message_count|+1}` ‚Äî –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è

**üí° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:** –í —Å–µ—Ä–≤–∏—Å–µ `tg_messenger` (—Ç–∏–ø `send`) –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

## –ü—Ä–∏–º–µ—Ä 2: –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

```yaml
arithmetic_operations:
  actions:
    - type: send
      text: "üî¢ –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏"
      callback_edit: false
    - type: send
      text: |
        –ò—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: {base_value}
        + 10: {base_value|+10}
        - 5: {base_value|-5}
        * 2: {base_value|*2}
        / 3: {base_value|/3}
        % 7: {base_value|%7}
      callback_edit: false
      chain: true
    - type: send
      text: "–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π: {result}"
      callback_edit: false
      chain: completed
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**
- `|+value` ‚Äî —Å–ª–æ–∂–µ–Ω–∏–µ
- `|-value` ‚Äî –≤—ã—á–∏—Ç–∞–Ω–∏–µ
- `|*value` ‚Äî —É–º–Ω–æ–∂–µ–Ω–∏–µ
- `|/value` ‚Äî –¥–µ–ª–µ–Ω–∏–µ
- `|%value` ‚Äî –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞

```yaml
text_transformations:
  actions:
    - type: send
      text: "üî§ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞"
      callback_edit: false
    - type: send
      text: |
        –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç: {original_text}
        –í–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä: {original_text|upper}
        –ù–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä: {original_text|lower}
        –ó–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã: {original_text|title}
        –ü–µ—Ä–≤–∞—è –∑–∞–≥–ª–∞–≤–Ω–∞—è: {original_text|capitalize}
      callback_edit: false
      chain: true
    - type: send
      text: "–û–±—Ä–µ–∑–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: {long_text|truncate:50}"
      callback_edit: false
      chain: completed
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:**
- `|upper` ‚Äî –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
- `|lower` ‚Äî –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä
- `|title` ‚Äî –∑–∞–≥–ª–∞–≤–Ω—ã–µ –±—É–∫–≤—ã –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞
- `|capitalize` ‚Äî –ø–µ—Ä–≤–∞—è –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞
- `|length` ‚Äî –ø–æ–¥—Å—á–µ—Ç –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤)
- `|truncate:length` ‚Äî –æ–±—Ä–µ–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å "..."
- `|regex:pattern` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é

## –ü—Ä–∏–º–µ—Ä 4: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º

```yaml
regex_extraction:
  actions:
    - type: send
      text: "üîç –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º"
      callback_edit: false
    - type: send
      text: |
        –í—Ä–µ–º—è –∏–∑ —Ç–µ–∫—Å—Ç–∞: {event_text|regex:(?:\\d+\\s*[dhms]\\s*)+}
        Email –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è: {message|regex:[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}}
        –¢–µ–ª–µ—Ñ–æ–Ω: {contact|regex:\\+?[1-9]\\d{1,14}}
        URL: {text|regex:https?://[^\\s]+}
      callback_edit: false
      chain: true
    - type: send
      text: "–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {extracted_data}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç regex –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä:**
- `|regex:pattern` ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (–≥—Ä—É–ø–ø–∞ 0)
- –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã Python

**–ü—Ä–∏–º–µ—Ä—ã –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:**
- `(?:\\d+\\s*[dhms]\\s*)+` ‚Äî –≤—Ä–µ–º—è (1h 30m, 2d 5h, etc.)
- `[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}` ‚Äî email
- `\\+?[1-9]\\d{1,14}` ‚Äî –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `https?://[^\\s]+` ‚Äî URL

## –ü—Ä–∏–º–µ—Ä 5: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏

```yaml
datetime_formatting:
  actions:
    - type: send
      text: "üìÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏"
      callback_edit: false
    - type: send
      text: |
        Timestamp: {timestamp|format:timestamp}
        –î–∞—Ç–∞: {timestamp|format:date}
        –í—Ä–µ–º—è: {timestamp|format:time}
        –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: {timestamp|format:datetime}
      callback_edit: false
      chain: true
    - type: send
      text: "–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: {relative_time}"
      callback_edit: false
      chain: completed
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- `|format:timestamp` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ timestamp
- `|format:date` ‚Äî —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã (dd.mm.yyyy)
- `|format:time` ‚Äî —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ (hh:mm)
- `|format:datetime` ‚Äî –ø–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏

## –ü—Ä–∏–º–µ—Ä 6: –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏

```yaml
list_operations:
  actions:
    - type: send
      text: "üìã –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏"
      callback_edit: false
    - type: send
      text: |
        –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {users|list}
        –ß–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: {users|comma}
        –¢–µ–≥–∏: {users|tags}
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {users|length}
      callback_edit: false
      chain: true
    - type: send
      text: "–ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {users|first}"
      callback_edit: false
      chain: completed
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏:**
- `|list` ‚Äî –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (‚Ä¢ item)
- `|comma` ‚Äî —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (item1, item2)
- `|tags` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ–≥–∏ (@user)
- `|length` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `|first` ‚Äî –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
- `|last` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç

## –ü—Ä–∏–º–µ—Ä 7: Fallback –∑–Ω–∞—á–µ–Ω–∏—è

```yaml
fallback_values:
  actions:
    - type: send
      text: "üîÑ Fallback –∑–Ω–∞—á–µ–Ω–∏—è"
      callback_edit: false
    - type: send
      text: |
        –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {username|fallback:–ì–æ—Å—Ç—å}
        –í–æ–∑—Ä–∞—Å—Ç: {age|fallback:–ù–µ —É–∫–∞–∑–∞–Ω}
        Email: {email|fallback:–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö}
        –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ: {|fallback:100}
      callback_edit: false
      chain: true
    - type: send
      text: "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π fallback: {value|upper|fallback:–ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç fallback:**
- `|fallback:value` ‚Äî –∑–∞–º–µ–Ω–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è
- –ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## –ü—Ä–∏–º–µ—Ä 8: –¶–µ–ø–æ—á–∫–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

```yaml
modifier_chains:
  actions:
    - type: send
      text: "üîó –¶–µ–ø–æ—á–∫–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤"
      callback_edit: false
    - type: send
      text: |
        –°–ª–æ–∂–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞: {raw_data|lower|truncate:20|fallback:–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö}
        –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ + —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {number|+100|*2|format:number}
        –°–ø–∏—Å–æ–∫ + —Ç–µ–≥–∏ + –æ–±—Ä–µ–∑–∫–∞: {users|tags|truncate:50}
        Regex + —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {event_text|regex:(?:\\d+\\s*[dhms]\\s*)+|upper}
      callback_edit: false
      chain: true
    - type: send
      text: "–†–µ–∑—É–ª—å—Ç–∞—Ç: {processed_result}"
      callback_edit: false
      chain: completed
```

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ
2. –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∂–¥–æ–≥–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–º—É
3. Fallback –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ü–µ–ø–æ—á–∫–∏

## –ü—Ä–∏–º–µ—Ä 9: –£—Å–ª–æ–≤–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞

```yaml
conditional_substitution:
  actions:
    - type: send
      text: "üéØ –£—Å–ª–æ–≤–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞"
      callback_edit: false
    - type: send
      text: |
        –°—Ç–∞—Ç—É—Å: {status|fallback:–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ}
        –°–æ–æ–±—â–µ–Ω–∏–µ: {status|equals:active|fallback:–ù–µ–∞–∫—Ç–∏–≤–µ–Ω|value:–ê–∫—Ç–∏–≤–µ–Ω}
        –†–æ–ª—å: {role|in_list:admin,moderator|fallback:–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å|value:–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä}
      callback_edit: false
      chain: true
    - type: send
      text: "–£—Å–ª–æ–≤–Ω—ã–π —Ç–µ–∫—Å—Ç: {condition|true|value:–î–∞|fallback:–ù–µ—Ç}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —É—Å–ª–æ–≤–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã:**
- `|equals:value` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏—è
- `|in_list:item1,item2` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫
- `|true` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è
- `|value:result` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤—è–∑–∫–µ —Å –¥—Ä—É–≥–∏–º–∏ —É—Å–ª–æ–≤–Ω—ã–º–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏)

## –ü—Ä–∏–º–µ—Ä 10: –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

```yaml
recursive_placeholders:
  actions:
    - type: send
      text: "üîÑ –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤"
      callback_edit: false
    - type: send
      text: |
        –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞: {username}
        –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –∑–∞–º–µ–Ω–∞: {nested_field}
        –¶–µ–ø–æ—á–∫–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤: {username|upper|truncate:10}
      callback_edit: false
      chain: true
    - type: send
      text: "–†–µ–∑—É–ª—å—Ç–∞—Ç: {processed_result}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã, –æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ 3 —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `max_nesting_depth`)
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–ª—É–±–∏–Ω—ã –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```yaml
# –ï—Å–ª–∏ –≤ values_dict –µ—Å—Ç—å:
# username: "john"
# nested_field: "–ü—Ä–∏–≤–µ—Ç, {username}!"  # –°–æ–¥–µ—Ä–∂–∏—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
# 
# –¢–æ {nested_field} –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫: "–ü—Ä–∏–≤–µ—Ç, john!"
```

## –ü—Ä–∏–º–µ—Ä 11: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è vs —Ä—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

```yaml
placeholder_processing_modes:
  actions:
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ tg_messenger (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    - type: send
      text: "–ü—Ä–∏–≤–µ—Ç, {username}! –í–∞—à ID: {user_id}"
      callback_edit: false
      # placeholder: true –ù–ï –Ω—É–∂–Ω–æ - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    
    # –†—É—á–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
    - type: validator
      rules:
        processed_username:
          - rule: not_empty
          - rule: length_min
            value: 3
      placeholder: true  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
      chain: true
    
    # –†—É—á–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π
    - type: user
      user_state: "awaiting_{action_type}"
      placeholder: true  # –í–∫–ª—é—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
      chain: completed
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ messenger (—Å–Ω–æ–≤–∞)
    - type: send
      text: "–°–æ—Å—Ç–æ—è–Ω–∏–µ: {user_state}, –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏–º—è: {processed_username|title}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **Messenger (send)**: –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã**: –¢—Ä–µ–±—É—é—Ç `placeholder: true` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è**: –¢–∞–∫–∂–µ —Ç—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä 12: –°–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

```yaml
complex_calculations:
  actions:
    - type: send
      text: "üßÆ –°–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è"
      callback_edit: false
    - type: send
      text: |
        –ü—Ä–æ—Ü–µ–Ω—Ç: {score|/100|*100|format:percent}
        –°—Ä–µ–¥–Ω–µ–µ: {total|/count|format:number}
        –°–∫–∏–¥–∫–∞: {price|*0.9|format:currency}
        –†–µ–π—Ç–∏–Ω–≥: {rating|*5|format:number}/5
      callback_edit: false
      chain: true
    - type: send
      text: "–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: {base_price|+tax|+fee|format:currency}"
      callback_edit: false
      chain: completed
```

## –ü—Ä–∏–º–µ—Ä 13: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏

```yaml
datetime_formatting:
  actions:
    - type: send
      text: "üìÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏"
      callback_edit: false
    - type: send
      text: |
        Timestamp: {timestamp|format:timestamp}
        –î–∞—Ç–∞: {timestamp|format:date}
        –í—Ä–µ–º—è: {timestamp|format:time}
        –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: {timestamp|format:datetime}
      callback_edit: false
      chain: true
    - type: send
      text: "–ò—Ç–æ–≥: {current_time|format:datetime|fallback:–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ}"
      callback_edit: false
      chain: completed
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- **–î–∞—Ç—ã –∏ –≤—Ä–µ–º—è:**
  - `|format:timestamp` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ timestamp (Unix time)
  - `|format:date` ‚Äî —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã (dd.mm.yyyy)
  - `|format:time` ‚Äî —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ (hh:mm)
  - `|format:datetime` ‚Äî –ø–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ (dd.mm.yyyy hh:mm)
- **–ß–∏—Å–ª–∞ –∏ –≤–∞–ª—é—Ç—ã:**
  - `|format:currency` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã (1000.00 ‚ÇΩ)
  - `|format:percent` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ (25.5%)
  - `|format:number` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª (1234.56)

## üÜï –ü—Ä–∏–º–µ—Ä 14: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã - –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

```yaml
nested_placeholders_basic:
  actions:
    - type: send
      text: "üîÑ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã - –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏"
      callback_edit: false
    - type: send
      text: |
        –ü—Ä–æ—Å—Ç–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å: {greeting_{language}}
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö: {user|fallback:{default_user}}
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–µ: {base|+{bonus}}
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: {timestamp|format:{format_type}}
      callback_edit: false
      chain: true
    - type: send
      text: "–†–µ–∑—É–ª—å—Ç–∞—Ç: {nested_result}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã:**
- **–ü—Ä–æ—Å—Ç–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å**: `{greeting_{language}}` ‚Äî –µ—Å–ª–∏ `language = "ru"`, —Ç–æ `greeting_{language}` —Å—Ç–∞–Ω–µ—Ç `greeting_ru`
- **–í –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö fallback**: `{user|fallback:{default_user}}` ‚Äî –µ—Å–ª–∏ `user` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `default_user`
- **–í –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö**: `{base|+{bonus}}` ‚Äî –∫ –∑–Ω–∞—á–µ–Ω–∏—é `base` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `bonus`
- **–í –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: `{timestamp|format:{format_type}}` ‚Äî —Ç–∏–ø —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–æ–ª—è `format_type`

## üÜï –ü—Ä–∏–º–µ—Ä 15: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞—Ö

```yaml
nested_placeholders_modifiers:
  actions:
    - type: send
      text: "üéØ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞—Ö"
      callback_edit: false
    - type: send
      text: |
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ truncate: {long_text|truncate:{max_length}}
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ regex: {event_text|regex:{regex_pattern}}
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ equals: {status|equals:{expected_status}|value:OK|fallback:BAD}
        –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ in_list: {role|in_list:{allowed_roles}|value:–î–æ—Å—Ç—É–ø|fallback:–ó–∞–ø—Ä–µ—Ç}
      callback_edit: false
      chain: true
    - type: send
      text: "–°–ª–æ–∂–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å: {result|format:{output_format}|truncate:{display_length}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞—Ö:**
- `{long_text|truncate:{max_length}}` ‚Äî –æ–±—Ä–µ–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞ –¥–æ –¥–ª–∏–Ω—ã, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ `max_length`
- `{event_text|regex:{regex_pattern}}` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –∏–∑ `regex_pattern`
- `{status|equals:{expected_status}|value:OK|fallback:BAD}` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å –æ–∂–∏–¥–∞–µ–º—ã–º –∏–∑ `expected_status`
- `{role|in_list:{allowed_roles}|value:–î–æ—Å—Ç—É–ø|fallback:–ó–∞–ø—Ä–µ—Ç}` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ —Å–ø–∏—Å–∫—É –∏–∑ `allowed_roles`

## üÜï –ü—Ä–∏–º–µ—Ä 16: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å

```yaml
multi_level_nesting:
  actions:
    - type: send
      text: "üèóÔ∏è –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å"
      callback_edit: false
    - type: send
      text: |
        –£—Ä–æ–≤–µ–Ω—å 1: {user_{type}_{field}}
        –£—Ä–æ–≤–µ–Ω—å 2: {config_{section}_{setting}|fallback:{default_{section}}}
        –£—Ä–æ–≤–µ–Ω—å 3: {data_{category}_{item}|format:{format_{category}}|truncate:{limit_{category}}}
      callback_edit: false
      chain: true
    - type: send
      text: "–ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å: {deeply_{nested_{field}}|upper|truncate:{max_{depth}}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏:**
```yaml
# –ï—Å–ª–∏ –≤ values_dict –µ—Å—Ç—å:
# type: "admin"
# field: "name"
# user_admin_name: "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
# 
# –¢–æ {user_{type}_{field}} –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫:
# 1. {type} = "admin"
# 2. {field} = "name"  
# 3. {user_{type}_{field}} = {user_admin_name} = "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
```

## üÜï –ü—Ä–∏–º–µ—Ä 17: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ

```yaml
nested_conditional_logic:
  actions:
    - type: send
      text: "üé≤ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ"
      callback_edit: false
    - type: send
      text: |
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É—Å–ª–æ–≤–∏–µ: {status|equals:{expected_{phase}}|value:{success_{phase}}|fallback:{error_{phase}}}
        –£—Å–ª–æ–≤–Ω–∞—è —Ä–æ–ª—å: {role|in_list:{permissions_{level}}|value:{allow_{level}}|fallback:{deny_{level}}}
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π fallback: {value|fallback:{default_{type}_{category}}}
      callback_edit: false
      chain: true
    - type: send
      text: "–°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞: {condition|true|value:{positive_{mood}}|fallback:{negative_{mood}}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã —É—Å–ª–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é:**
- `{status|equals:{expected_{phase}}|value:{success_{phase}}|fallback:{error_{phase}}}` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É—Å–ª–æ–≤–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ñ–∞–∑—ã
- `{role|in_list:{permissions_{level}}|value:{allow_{level}}|fallback:{deny_{level}}}` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º—É —Å–ø–∏—Å–∫—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
- `{value|fallback:{default_{type}_{category}}}` ‚Äî fallback –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## üÜï –ü—Ä–∏–º–µ—Ä 18: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

```yaml
nested_arithmetic:
  actions:
    - type: send
      text: "üßÆ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö"
      callback_edit: false
    - type: send
      text: |
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–ª–æ–∂–µ–Ω–∏–µ: {base_price|+{tax_{region}}}
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–º–Ω–æ–∂–µ–Ω–∏–µ: {quantity|*{price_{item_type}}}
        –°–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: {total|+{bonus_{level}}|*{discount_{category}}|format:currency}
        –£—Å–ª–æ–≤–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è: {amount|+{bonus|equals:{bonus_type}|value:{bonus_amount}|fallback:0}}
      callback_edit: false
      chain: true
    - type: send
      text: "–ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç: {final_{calculation_type}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é:**
- `{base_price|+{tax_{region}}}` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ª–æ–≥–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞
- `{quantity|*{price_{item_type}}}` ‚Äî —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ü–µ–Ω—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Ç–æ–≤–∞—Ä–∞
- `{total|+{bonus_{level}}|*{discount_{category}}|format:currency}` ‚Äî —Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å –±–æ–Ω—É—Å–æ–º –∏ —Å–∫–∏–¥–∫–æ–π
- `{amount|+{bonus|equals:{bonus_type}|value:{bonus_amount}|fallback:0}}` ‚Äî —É—Å–ª–æ–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞

## üÜï –ü—Ä–∏–º–µ—Ä 19: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

```yaml
nested_formatting:
  actions:
    - type: send
      text: "üé® –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏"
      callback_edit: false
    - type: send
      text: |
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç: {timestamp|format:{date_format_{locale}}}
        –£—Å–ª–æ–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {number|format:{format_type|equals:currency|value:currency|fallback:number}}
        –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {value|format:{display_{unit}}}
      callback_edit: false
      chain: true
    - type: send
      text: "–°–ª–æ–∂–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {result|format:{output_{type}_{format}}|truncate:{max_{display}}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é:**
- `{timestamp|format:{date_format_{locale}}}` ‚Äî —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ª–æ–∫–∞–ª–∏
- `{number|format:{format_type|equals:currency|value:currency|fallback:number}}` ‚Äî —É—Å–ª–æ–≤–Ω—ã–π –≤—ã–±–æ—Ä —Ç–∏–ø–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `{value|format:{display_{unit}}}` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

## üÜï –ü—Ä–∏–º–µ—Ä 20: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —Å–ø–∏—Å–∫–∞—Ö –∏ —Ç–µ–≥–∞—Ö

```yaml
nested_lists_and_tags:
  actions:
    - type: send
      text: "üìã –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ —Å–ø–∏—Å–∫–∞—Ö –∏ —Ç–µ–≥–∞—Ö"
      callback_edit: false
    - type: send
      text: |
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–≥–∏: {users_{group}|tags}
        –£—Å–ª–æ–≤–Ω—ã–π —Å–ø–∏—Å–æ–∫: {items_{category}|list|truncate:{max_{category}}}
        –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫: {data_{type}|format:{list_format_{style}}|list}
      callback_edit: false
      chain: true
    - type: send
      text: "–°–ª–æ–∂–Ω—ã–π —Å–ø–∏—Å–æ–∫: {result_{category}|tags|truncate:{limit_{category}}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã —Å–ø–∏—Å–∫–æ–≤ –∏ —Ç–µ–≥–æ–≤ —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é:**
- `{users_{group}|tags}` ‚Äî —Ç–µ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≥—Ä—É–ø–ø—ã
- `{items_{category}|list|truncate:{max_{category}}}` ‚Äî —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º
- `{data_{type}|format:{list_format_{style}}|list}` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∏–ª—è

## üÜï –ü—Ä–∏–º–µ—Ä 21: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ regex

```yaml
nested_regex:
  actions:
    - type: send
      text: "üîç –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –≤ regex"
      callback_edit: false
    - type: send
      text: |
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω: {event_text|regex:{regex_{pattern_type}}}
        –£—Å–ª–æ–≤–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ: {message|regex:{extract_{data_type}|fallback:.*}}}
        –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ–∏—Å–∫: {text|regex:{search_{field}_{format}}}
      callback_edit: false
      chain: true
    - type: send
      text: "–°–ª–æ–∂–Ω—ã–π regex: {result|regex:{pattern_{type}_{version}}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∏–º–µ—Ä—ã regex —Å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é:**
- `{event_text|regex:{regex_{pattern_type}}}` ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω regex –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
- `{message|regex:{extract_{data_type}|fallback:.*}}` ‚Äî —É—Å–ª–æ–≤–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å fallback –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º
- `{text|regex:{search_{field}_{format}}}` ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ–∏—Å–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª—è –∏ —Ñ–æ—Ä–º–∞—Ç–∞

## üÜï –ü—Ä–∏–º–µ—Ä 22: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

```yaml
practical_nested_scenarios:
  actions:
    - type: send
      text: "üöÄ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤"
      callback_edit: false
    - type: send
      text: |
        –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: –ü—Ä–∏–≤–µ—Ç, {user_{language}|fallback:–ì–æ—Å—Ç—å}!
        –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è: {menu_{section}_{user_level}|fallback:{menu_{section}_default}}
        –£—Å–ª–æ–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: {status|equals:{expected_{action}}|value:{success_{action}}|fallback:{error_{action}}}
      callback_edit: false
      chain: true
    - type: send
      text: "–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {message_{context}_{user_type}_{status}|truncate:{limit_{context}}}"
      callback_edit: false
      chain: completed
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: `–ü—Ä–∏–≤–µ—Ç, {user_{language}|fallback:–ì–æ—Å—Ç—å}!` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è**: `{menu_{section}_{user_level}|fallback:{menu_{section}_default}}` ‚Äî –º–µ–Ω—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–£—Å–ª–æ–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: `{status|equals:{expected_{action}}|value:{success_{action}}|fallback:{error_{action}}}` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–µ–π—Å—Ç–≤–∏—è
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: `{message_{context}_{user_type}_{status}|truncate:{limit_{context}}}` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

## üÜï –ü—Ä–∏–º–µ—Ä 23: –û—Ç–ª–∞–¥–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

```yaml
debugging_nested_placeholders:
  actions:
    - type: send
      text: "üêõ –û—Ç–ª–∞–¥–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤"
      callback_edit: false
    - type: send
      text: |
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏: {debug_{level}_{field}|fallback:–û–¢–°–£–¢–°–¢–í–£–ï–¢}
        –°–ª–æ–∂–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞: {test_{nested_{depth}}|upper|truncate:50}
        –£—Å–ª–æ–≤–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞: {value|equals:{expected}|value:OK|fallback:–û–®–ò–ë–ö–ê {debug_{error_type}}}
      callback_edit: false
      chain: true
    - type: send
      text: "–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ª–∞–¥–∫–∏: {debug_result|format:{debug_{format_type}}}"
      callback_edit: false
      chain: completed
```

**–°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–ª–∞–¥–∫–µ:**
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å** –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback** –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** –≤ —Ü–µ–ø–æ—á–∫–∞—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å** –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

## üÜï –ü—Ä–∏–º–µ—Ä 24: –¢–æ—á–µ—á–Ω–∞—è –Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º –ø–æ–ª—è–º –æ–±—ä–µ–∫—Ç–æ–≤

```yaml
dot_notation_examples:
  actions:
    - type: send
      text: "üîó –¢–æ—á–µ—á–Ω–∞—è –Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º –ø–æ–ª—è–º"
      callback_edit: false
    - type: send
      text: |
        –ü—Ä–æ—Å—Ç–æ–π –¥–æ—Å—Ç—É–ø: {promo_data.promo_code}
        –ì–ª—É–±–æ–∫–∏–π –¥–æ—Å—Ç—É–ø: {user.profile.settings.notifications.email}
        –° –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏: {promo_data.started_at|format:date}
        –° fallback: {promo_data.user_id|fallback:–ì–ª–æ–±–∞–ª—å–Ω—ã–π}
        –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞: {promo_data.user_id|equals:123|value:–í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥|fallback:–û–±—â–∏–π –ø—Ä–æ–º–æ–∫–æ–¥}
      callback_edit: false
      chain: true
    - type: send
      text: "–°–º–µ—à–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç: –ü—Ä–æ–º–æ–∫–æ–¥ {promo_data.promo_code} –¥–ª—è {promo_data.promo_name}"
      callback_edit: false
      chain: completed
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–µ—á–Ω–∞—è –Ω–æ—Ç–∞—Ü–∏—è:**
- **–ü—Ä–æ—Å—Ç–æ–π –¥–æ—Å—Ç—É–ø**: `{promo_data.promo_code}` ‚Äî –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `promo_code` –∏–∑ –æ–±—ä–µ–∫—Ç–∞ `promo_data`
- **–ì–ª—É–±–æ–∫–∏–π –¥–æ—Å—Ç—É–ø**: `{user.profile.settings.notifications.email}` ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Ü–µ–ø–æ—á–∫–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **–° –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏**: `{promo_data.started_at|format:date}` ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫ –≤–ª–æ–∂–µ–Ω–Ω–æ–º—É –ø–æ–ª—é
- **–° fallback**: `{promo_data.user_id|fallback:–ì–ª–æ–±–∞–ª—å–Ω—ã–π}` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –µ—Å–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ —Ä–∞–≤–Ω–æ `None`
- **–£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞**: `{promo_data.user_id|equals:123|value:–í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥|fallback:–û–±—â–∏–π –ø—Ä–æ–º–æ–∫–æ–¥}` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö:**
```yaml
# promo_data –æ–±—ä–µ–∫—Ç:
promo_data:
  promo_code: "SUMMER2024"
  promo_name: "–õ–µ—Ç–Ω—è—è –∞–∫—Ü–∏—è"
  user_id: 123
  started_at: "2024-06-01T00:00:00"
  expired_at: "2024-08-31T23:59:59"

# user –æ–±—ä–µ–∫—Ç:
user:
  profile:
    settings:
      notifications:
        email: true
        sms: false
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
- `{promo_data.promo_code}` ‚Üí `"SUMMER2024"`
- `{user.profile.settings.notifications.email}` ‚Üí `true`
- `{promo_data.started_at|format:date}` ‚Üí `"01.06.2024"`
- `{promo_data.user_id|fallback:–ì–ª–æ–±–∞–ª—å–Ω—ã–π}` ‚Üí `123`
- `{promo_data.user_id|equals:123|value:–í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥|fallback:–û–±—â–∏–π –ø—Ä–æ–º–æ–∫–æ–¥}` ‚Üí `"–í–∞—à –ø—Ä–æ–º–æ–∫–æ–¥"`
- `–ü—Ä–æ–º–æ–∫–æ–¥ {promo_data.promo_code} –¥–ª—è {promo_data.promo_name}` ‚Üí `"–ü—Ä–æ–º–æ–∫–æ–¥ SUMMER2024 –¥–ª—è –õ–µ—Ç–Ω—è—è –∞–∫—Ü–∏—è"`

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback** –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª–µ–π
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** –ª–æ–≥–∏—á–µ—Å–∫–∏
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏** –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å–ª–æ–∂–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- **–ü–æ–º–Ω–∏—Ç—å –ø—Ä–æ `placeholder: true`** –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∫—Ä–æ–º–µ tg_messenger
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É** –≤ tg_messenger –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ–∫
- **–ü—Ä–∏–º–µ–Ω—è—Ç—å —É—Å–ª–æ–≤–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞ —á–∏—Å–µ–ª –∏ –¥–∞—Ç
- **–ü—Ä–∏–º–µ–Ω—è—Ç—å regex –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–∫—Å—Ç–∞
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã** –æ—Ç–¥–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞—Ö
- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** –∑–∞—Ä–∞–Ω–µ–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –≥–ª—É–±–∏–Ω—É –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏** –¥–æ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–æ–≤ (‚â§3 —É—Ä–æ–≤–Ω–µ–π)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback** –¥–ª—è –≤—Å–µ—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
- **–ü—Ä–∏–º–µ–Ω—è—Ç—å —Ç–æ—á–µ—á–Ω—É—é –Ω–æ—Ç–∞—Ü–∏—é** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–ª–æ–∂–µ–Ω–Ω—ã–º –ø–æ–ª—è–º –æ–±—ä–µ–∫—Ç–æ–≤

### ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ
- –°–æ–∑–¥–∞–≤–∞—Ç—å **—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –≤ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Å–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** (>3 —É—Ä–æ–≤–Ω–µ–π)
- **–°–æ–∑–¥–∞–≤–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã** –≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞—Ö

### ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
- **–°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏** –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞—Ö
- **–ó–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å—é** –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–µ** –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## –û—Ç–ª–∞–¥–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ—Ç–ª–∞–¥–∫–µ
- **–í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** –≤ —Ü–µ–ø–æ—á–∫–∞—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `placeholder: true`** –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∫—Ä–æ–º–µ messenger
- **–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –¥–∞–Ω–Ω—ã—Ö** –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö (prev_data, response_data)
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** –ø–æ —É—Ä–æ–≤–Ω—è–º
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** –ø–æ —á–∞—Å—Ç—è–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
```yaml
# –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
test_placeholders:
  actions:
    - type: send
      text: "–¢–µ—Å—Ç: {test_field|upper|fallback:–¢–ï–°–¢}"
      callback_edit: false
    - type: send
      text: "Regex —Ç–µ—Å—Ç: {event_text|regex:(?:\\d+\\s*[dhms]\\s*)+|fallback:–í—Ä–µ–º—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ}"
      callback_edit: false
    - type: send
      text: "–í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç: {nested_{level}|fallback:–£—Ä–æ–≤–µ–Ω—å {level}}"
      callback_edit: false
    - type: send
      text: "–†–µ–∑—É–ª—å—Ç–∞—Ç: {result}"
      callback_edit: false
      chain: completed
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤, fallback –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ –∏ –Ω–∞–¥–µ–∂–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã.

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
- **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ü–µ–ø–æ—á–∫–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤** –∑–∞—Ä–∞–Ω–µ–µ
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback** –¥–ª—è –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –ø–æ–ª–µ–π
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã** –æ—Ç–¥–µ–ª—å–Ω–æ
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏
- **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é** –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞—Ö
- **–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –≥–ª—É–±–∏–Ω—É** –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–æ–≤
- **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã** –ø–æ —É—Ä–æ–≤–Ω—è–º 