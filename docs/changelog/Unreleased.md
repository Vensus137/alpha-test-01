# [Unreleased]

*Последний коммит для анализа: `cc9c8cf` (2025-09-20)*

## [5.0]

### Added
- **Docker контейнеризация** — полная поддержка развертывания через Docker с автономным образом
- **Автоматический установщик** — единый скрипт `core_updater.py` для установки и обновления
- **Глобальные команды управления** — универсальный скрипт `command` для управления системой
- **Интерактивное меню** — удобное меню с 4 основными пунктами (Docker, обновление, миграция, зависимости)
- **Динамический прогресс** — отображение логов в реальном времени с прогрессом выполнения
- **Система зависимостей** — автоматическая установка Python пакетов и системных зависимостей
- **Команда экстренной остановки** — `command kill` для быстрой остановки всех Docker процессов

### Changed
- **Архитектура развертывания** — переход на контейнерную архитектуру
- **Упрощенная структура** — единая конфигурация вместо dev/prod
- **Логика установки** — объединены установка и обновление в единый скрипт
- **Улучшенный статус** — отображение статуса контейнера и приложения с детальной информацией
- **Умный перезапуск** — проверка работающих процессов перед запуском новых
- **Упрощенный деплой гайд** — краткие и понятные инструкции по установке

### Fixed
- **Исправлена обработка недоступности бота** — предотвращение бесконечных циклов polling при отсутствии токена
- **Улучшена система команд Telegram** — добавлены проверки доступности бота перед регистрацией команд
- **Исправлено дублирование логов** — реализовано кэширование переменных окружения в SettingsManager
- **Улучшен fallback пресетов** — корректная обработка несуществующих пресетов с автоматическим переходом на default
- **Исправлена работа с Docker** — решение проблем с CRLF окончаниями строк в скриптах

### Enhanced
- **Улучшен скрипт деплоя** — увеличен лимит поиска версий с 10 до 50 попыток для активных релизов
- **Расширены возможности command** — добавлена поддержка параметра количества строк в `app-logs`
- **Улучшена остановка приложения** — двухэтапная остановка (SIGTERM → SIGKILL) с детальной диагностикой
- **Глобальные команды** — команды `command` работают из любой директории сервера
- **Разделение управления** — отдельные команды для контейнера (`start`, `stop`, `restart`) и приложения (`app-start`, `app-stop`, `app-restart`)

### Technical Details
- **Docker конфигурация**: `docker-compose.yml` с монтированием всего проекта
- **Автономный образ**: все Python зависимости в образе, не требует `requirements.txt` на хосте
- **Система обновлений**: поддержка Base/Pro версий с GitHub токенами

